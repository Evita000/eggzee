<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üê£ Eggzee Interactive</title>

    <!-- ‚úÖ Local p5.js -->
    <script src="p5.min.js"></script>

    <!-- üß© Safe minimal p5.play replacement -->
    <script>
      console.log("üê£ Injecting createSprite fallback (final fix)...");

      (function (p5) {
        // ‚úÖ Make sure we have a global sprite list
        if (!window.allSprites) window.allSprites = [];

        // --- Sprite constructor ---
        p5.prototype.Sprite = function (x, y, w, h) {
          this.position = p5.prototype.createVector(x || 0, y || 0);
          this.width = w || 50;
          this.height = h || 50;
          this.rotation = 0;
          this.visible = true;
          this.scale = 1;
          this.velocity = p5.prototype.createVector(0, 0);
          this.addImage = () => {};
          this.changeImage = () => {};
        };

        // --- createSprite() ---
        p5.prototype.createSprite = function (x, y, w, h) {
          const s = new p5.prototype.Sprite(x, y, w, h);
          window.allSprites.push(s);
          return s;
        };

        // --- drawSprites() ---
        p5.prototype.drawSprites = function () {
          if (!window.allSprites.length) return;
          for (let s of window.allSprites) {
            if (!s.visible) continue;
            // ‚úÖ Explicitly use p5 context methods ‚Äî not prototype-level
            push();
            translate(s.position.x, s.position.y);
            rotate(radians(s.rotation));
            noStroke();
            fill(255);
            rectMode(CENTER);
            rect(0, 0, s.width * s.scale, s.height * s.scale);
            pop();
          }
        };
      })(p5);

      console.log("‚úÖ Fallback ready ‚Äî safe draw context active.");
    </script>

    <!-- üê£ Main game -->
    <script src="sketch.js"></script>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body></body>
</html>

  <body></body>
</html>

