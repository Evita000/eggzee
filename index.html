<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ£ Eggzee Interactive</title>

    <!-- âœ… Load p5.js first -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>

    <script>
      // --- Mini p5.play fallback ---
      function addMiniP5Play(p) {
        if (p.prototype.createSprite) return;
        console.log("ğŸ£ Injecting fallback createSprite()...");
        p.prototype.Sprite = function (x, y, w, h) {
          this.position = p.prototype.createVector(x || 0, y || 0);
          this.width = w || 50;
          this.height = h || 50;
          this.rotation = 0;
          this.visible = true;
          this.scale = 1;
          this.velocity = p.prototype.createVector(0, 0);
          this.addImage = () => {};
          this.changeImage = () => {};
        };
        p.prototype.createSprite = function (x, y, w, h) {
          const s = new p.prototype.Sprite(x, y, w, h);
          if (!this.allSprites) this.allSprites = [];
          this.allSprites.push(s);
          return s;
        };
        p.prototype.drawSprites = function () {
          if (!this.allSprites) return;
          for (let s of this.allSprites) {
            if (s.visible) {
              p.prototype.push();
              p.prototype.translate(s.position.x, s.position.y);
              p.prototype.rotate(p.prototype.radians(s.rotation));
              p.prototype.noStroke();
              p.prototype.fill(255);
              p.prototype.rectMode(p.prototype.CENTER);
              p.prototype.rect(0, 0, s.width * s.scale, s.height * s.scale);
              p.prototype.pop();
            }
          }
        };
      }

      // --- Sequential loader ---
      async function loadSketch() {
        // Wait until p5 is defined
        while (typeof window.p5 === "undefined") {
          await new Promise(r => setTimeout(r, 100));
        }

        // Inject fallback
        addMiniP5Play(window.p5);

        // Confirm createSprite now exists
        if (typeof window.p5.prototype.createSprite === "undefined") {
          console.warn("âš ï¸ createSprite still missing after fallback injection");
        } else {
          console.log("âœ… createSprite() is ready!");
        }

        // Dynamically load your sketch AFTER everything else
        const script = document.createElement("script");
        script.src = "sketch.js";
        script.onload = () => console.log("âœ… sketch.js loaded and running");
        document.body.appendChild(script);
      }

      window.addEventListener("load", loadSketch);
    </script>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
      }
      canvas { display: block; }
    </style>
  </head>
  <body></body>
</html>


