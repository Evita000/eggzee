<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üíÉ Eggzee Dance Scene</title>

  <!-- CreateJS runtime -->
  <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
  <!-- Animate export -->
  <script src="eggzeedanceworks.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background-color: black;
      touch-action: none; /* üö´ disables pinch-zoom and drag */
    }
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-color: black;
  touch-action: none; /* prevent pinch-zoom */
}
canvas {
  image-rendering: auto;
}

    #animation_container, #canvas {
      position: absolute;
      inset: 0;
      margin: auto;
      display: block;
      width: 100vw !important;
      height: 100vh !important;
      background-color: black;
    }
  </style>
</head>

<body onload="init();">
  <div id="animation_container">
    <canvas id="canvas"></canvas>
  </div>

<script>
let canvas, stage, exportRoot, comp, lib, bg;

function init() {
  console.log("üé¨ Starting Eggzee Dance...");
  canvas = document.getElementById("canvas");
  comp = AdobeAn.getComposition("1204F486BCA4BF4E9AA6F7C9DE17DD26");
  lib = comp.getLibrary();

  const loader = new createjs.LoadQueue(false);
  loader.addEventListener("fileload", (evt) => {
    if (evt.item.type === "image") {
      comp.getImages()[evt.item.id] = evt.result;
    }
  });
  loader.addEventListener("complete", handleComplete);
  loader.loadManifest(lib.properties.manifest);
}

function handleComplete() {
  exportRoot = new lib.eggzeedanceworks();
  stage = new lib.Stage(canvas);

  // ü™© Load dancefloor background
  const bgImage = new Image();
  bgImage.src = "assets/dancefloor1.png";
  bgImage.onload = function () {
    bg = new createjs.Bitmap(bgImage);
    stage.addChild(bg);
    stage.addChild(exportRoot);

    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);
  };

  AdobeAn.compositionLoaded(lib.properties.id);
  createjs.Ticker.framerate = lib.properties.fps;
  createjs.Ticker.addEventListener("tick", stage);
}

function resizeCanvas() {
  const w = window.innerWidth;
  const h = window.innerHeight;
  canvas.width = w;
  canvas.height = h;

  if (!bg) return;

  // ü™© Center + contain background ‚Äî show full image perfectly centered
  const scale = Math.min(w / bg.image.width, h / bg.image.height);
  bg.scaleX = bg.scaleY = scale;

  // align center
  bg.x = w / 2 - (bg.image.width * scale) / 2;
  bg.y = h / 2 - (bg.image.height * scale) / 2;

  // üê£ scale & center Eggzee animation
  const designW = lib.properties.width;
  const designH = lib.properties.height;
  const animScale = Math.min(w / designW, h / designH);
  exportRoot.scaleX = exportRoot.scaleY = animScale;
  exportRoot.x = w / 2 - (designW * animScale) / 2;
  exportRoot.y = h / 2 - (designH * animScale) / 2;

  // Stage matches canvas fully
  stage.scaleX = stage.scaleY = 1;
  stage.x = 0;
  stage.y = 0;
}



// ‚úÖ Single-click Return button (works on iPhone + desktop)
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("returnBtn");
  btn.addEventListener("click", () => {
    console.log("‚¨ÖÔ∏è Returning to Eggzee main menu...");
    window.location.href = "index.html"; // direct redirect
  });
});
</script>




  <button id="returnBtn"
    style="position:fixed; bottom:20px; right:20px; padding:12px 18px; font-size:18px;
    border:none; border-radius:10px; background:#ffd6e0; color:#333; cursor:pointer;">
    ‚¨ÖÔ∏è Return to Eggzee
  </button>

  <script>
    document.getElementById("returnBtn").addEventListener("click", () => {
      try { window.close(); } 
      catch (e) { console.warn("Close blocked, redirecting..."); }
      setTimeout(() => window.open("index.html", "_self"), 300);
    });
  </script>
</body>
</html>









