<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üíÉ Eggzee Dance Scene</title>

  <!-- CreateJS runtime -->
  <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
  <!-- Animate export -->
  <script src="eggzeedanceworks.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background-color: black;
      touch-action: none;
    }

    canvas {
      image-rendering: auto;
    }

    #animation_container, #canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
    }

    /* üê£ Big Eggzee Return Button */
    #eggzeeReturnBtn {
      position: fixed;
      bottom: 35px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 99999;
      cursor: pointer;
      background: none;
      border: none;
      text-align: center;
    }

    #eggzeeReturnImg {
      width: 140px;
      height: auto;
      animation: eggBounce 1.6s infinite ease-in-out;
      filter: drop-shadow(0 0 18px rgba(255, 150, 220, 0.8));
    }

    #returnLabel {
      margin-top: 8px;
      font-size: 20px;
      color: white;
      font-weight: 600;
      text-shadow: 0 0 8px rgba(0,0,0,0.9);
    }

    @keyframes eggBounce {
      0% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-14px) scale(1.04); }
      100% { transform: translateY(0) scale(1); }
    }
  </style>
</head>

<body onload="init();">
  <div id="animation_container">
    <canvas id="canvas"></canvas>
  </div>

<script>
let canvas, stage, exportRoot, comp, lib, bg;

function init() {
  canvas = document.getElementById("canvas");
  comp = AdobeAn.getComposition("1204F486BCA4BF4E9AA6F7C9DE17DD26");
  lib = comp.getLibrary();

  const loader = new createjs.LoadQueue(false);
  loader.addEventListener("fileload", evt => {
    if (evt.item.type === "image") {
      comp.getImages()[evt.item.id] = evt.result;
    }
  });
  loader.addEventListener("complete", handleComplete);
  loader.loadManifest(lib.properties.manifest);
}

function handleComplete() {
  exportRoot = new lib.eggzeedanceworks();
  stage = new lib.Stage(canvas);

  const bgImage = new Image();
  bgImage.src = "assets/dancefloor1.png";
  bgImage.onload = function () {
    bg = new createjs.Bitmap(bgImage);
    stage.addChild(bg);
    stage.addChild(exportRoot);

    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);
  };

  AdobeAn.compositionLoaded(lib.properties.id);
  createjs.Ticker.framerate = lib.properties.fps;
  createjs.Ticker.addEventListener("tick", stage);
}

function resizeCanvas() {
  const w = window.innerWidth;
  const h = window.innerHeight;
  canvas.width = w;
  canvas.height = h;

  if (!bg) return;

  const designW = lib.properties.width;
  const designH = lib.properties.height;
  const isMobile = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);

  let scaleX = w / bg.image.width;
  let scaleY = h / bg.image.height;

  let scale = isMobile ? Math.min(scaleX, scaleY) * 1.12 : Math.min(scaleX, scaleY);

  bg.scaleX = bg.scaleY = scale;
  bg.x = (w - bg.image.width * scale) / 2;
  bg.y = (h - bg.image.height * scale) / 2;

  const animScale = Math.min(w / designW, h / designH);
  exportRoot.scaleX = exportRoot.scaleY = animScale;
  exportRoot.x = (w - designW * animScale) / 2;
  exportRoot.y = (h - designH * animScale) / 2;
}
</script>

<!-- ü©∑ Big Eggzee Return Button -->
<button id="eggzeeReturnBtn">
  <img id="eggzeeReturnImg" src="assets/eggzee7.png" alt="Return">
  <div id="returnLabel">Return to Menu</div>
</button>

<script>
function closeDance() {
  // ‚≠ê Tell index.html we are returning from dance
  localStorage.setItem("eggzeeJustDanced", "true");

  // ‚≠ê Keep Eggzee awake
  localStorage.setItem("eggzeeForceAwake", "true");

  // ‚≠ê Preserve energy timer
  localStorage.setItem("eggzeeRealStartTime", Date.now());

  // ‚≠ê Return to main menu
  window.location.href = "index.html";
}



  document.getElementById("eggzeeReturnBtn").addEventListener("click", closeDance);

  // Fade-in animation
  const btn = document.getElementById("eggzeeReturnBtn");
  btn.style.opacity = "0";
  setTimeout(() => {
    btn.style.transition = "opacity 0.9s ease";
    btn.style.opacity = "1";
  }, 1200);
</script>

</body>
</html>




















