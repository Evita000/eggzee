<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üíÉ Eggzee Dance Scene</title>

  <!-- CreateJS runtime -->
  <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
  <!-- Animate export -->
  <script src="eggzeedanceworks.js"></script>

 <style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background-color: black;
  }

  #animation_container, #canvas {
    position: absolute;
    inset: 0;
    margin: auto;
    display: block;
    width: 100vw !important;
    height: 100vh !important;
    background-color: black;
  }
</style>

</head>

<body onload="init();">
  <div id="animation_container">
    <canvas id="canvas"></canvas>
  </div>

  <script>
    var canvas, stage, exportRoot, comp, lib;

    function init() {
      console.log("üé¨ Starting Eggzee Dance...");
      canvas = document.getElementById("canvas");
      comp = AdobeAn.getComposition("1204F486BCA4BF4E9AA6F7C9DE17DD26");
      lib = comp.getLibrary();

      var loader = new createjs.LoadQueue(false);
      loader.addEventListener("fileload", function(evt) {
        if (evt.item.type === "image") {
          comp.getImages()[evt.item.id] = evt.result;
        }
      });
      loader.addEventListener("complete", handleComplete);
      loader.loadManifest(lib.properties.manifest);
    }

function handleComplete() {
  exportRoot = new lib.eggzeedanceworks();
  stage = new lib.Stage(canvas);

  // ü™© Load dancefloor background
  var bgImage = new Image();
  bgImage.src = "assets/dancefloor1.png";
  bgImage.onload = function () {
    var bg = new createjs.Bitmap(bgImage);
    stage.addChild(bg);
    stage.addChild(exportRoot);

    // üí° Responsive full-screen scaling
    function resizeCanvas() {
      const w = window.innerWidth;
      const h = window.innerHeight;
      const scaleX = w / lib.properties.width;
      const scaleY = h / lib.properties.height;
      const scale = Math.max(scaleX, scaleY); // fill screen completely

      canvas.width = w;
      canvas.height = h;
      stage.scaleX = stage.scaleY = scale;
      stage.x = (w - lib.properties.width * scale) / 2;
      stage.y = (h - lib.properties.height * scale) / 2;

      bg.scaleX = w / bgImage.width;
      bg.scaleY = h / bgImage.height;
    }

    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();
  };

  AdobeAn.compositionLoaded(lib.properties.id);
  createjs.Ticker.framerate = lib.properties.fps;
  createjs.Ticker.addEventListener("tick", stage);

  console.log("üíÉ Eggzee now fills the screen!");
}


  </script>
   <button id="returnBtn"
style="position:fixed; bottom:20px; right:20px; padding:12px 18px; font-size:18px;
border:none; border-radius:10px; background:#ffd6e0; color:#333; cursor:pointer;">
‚¨ÖÔ∏è Return to Eggzee
</button>

<!-- ‚úÖ Works on mobile, desktop, GitHub Pages -->
<script>
  document.getElementById("returnBtn").addEventListener("click", () => {
    try {
      // Try to close if this tab was opened by JavaScript
      window.close();
    } catch (e) {
      console.warn("Close blocked, redirecting...");
    }

    // Always schedule a redirect fallback
    setTimeout(() => {
      // Use _self so it replaces this tab on iPhone/Android
      window.open("index.html", "_self");
    }, 300);
  });
</script>

</body>
</html>







